"use client";
import React, { useState, useRef, useEffect } from "react";
import { 
  Bold, 
  Italic, 
  Underline, 
  AlignLeft, 
  AlignCenter, 
  AlignRight, 
  AlignJustify,
  List,
  ListOrdered,
  Download,
  Type,
  Highlighter,
  Link,
  Image,
  Undo,
  Redo,
  FileText,
  Table,
  CheckSquare,
  Circle,
  ChevronDown,
  Square,
  SquarePen,
  Heading1,
  Heading2,
  Heading3,
  Code,
  Quote,
  Minus,
  Calendar,
  Mail,
  Phone,
  Hash,
  DollarSign,
  Clock,
  MapPin,
  User,
  Sparkles,
  Save,
  Upload,
  Eye,
  Settings
} from "lucide-react";

const AddTemplate = () => {
  const [fontSize, setFontSize] = useState("16");
  const [fontFamily, setFontFamily] = useState("Inter");
  const [textColor, setTextColor] = useState("#1f2937");
  const [bgColor, setBgColor] = useState("#fef08a");
  const [showColorPicker, setShowColorPicker] = useState(false);
  const [showBgPicker, setShowBgPicker] = useState(false);
  const [showTableModal, setShowTableModal] = useState(false);
  const [showTemplates, setShowTemplates] = useState(false);
  const [tableRows, setTableRows] = useState(3);
  const [tableCols, setTableCols] = useState(3);
  const [documentTitle, setDocumentTitle] = useState("Untitled Document");
  const [pageFormat, setPageFormat] = useState("A4");
  const editorRef = useRef<HTMLDivElement>(null);

  useEffect(() => {
    if (editorRef.current) {
      editorRef.current.focus();
    }
  }, []);

  const executeCommand = (command: string, value: any = null) => {
    document.execCommand(command, false, value);
    editorRef.current?.focus();
  };

  const insertLink = () => {
    const url = prompt("Enter URL:");
    if (url) {
      executeCommand("createLink", url);
    }
  };

  const insertImage = () => {
    const url = prompt("Enter image URL:");
    if (url) {
      executeCommand("insertImage", url);
    }
  };

  const changeFontSize = (size: string) => {
    setFontSize(size);
    executeCommand("fontSize", "7");
    const fontElements = editorRef.current?.querySelectorAll("font[size='7']");
    fontElements?.forEach((element) => {
      element.removeAttribute("size");
      (element as HTMLElement).style.fontSize = size + "px";
    });
  };

  const changeFontFamily = (family: string) => {
    setFontFamily(family);
    executeCommand("fontName", family);
  };

  const changeTextColor = (color: string) => {
    setTextColor(color);
    executeCommand("foreColor", color);
  };

  const changeBackgroundColor = (color: string) => {
    setBgColor(color);
    executeCommand("hiliteColor", color);
  };

  const insertHeading = (level: number) => {
    executeCommand("formatBlock", `<h${level}>`);
  };

  const insertDivider = () => {
    const dividerHTML = '<hr style="border: none; border-top: 2px solid #e5e7eb; margin: 20px 0;" /><p><br></p>';
    document.execCommand('insertHTML', false, dividerHTML);
  };

  const insertTextField = (type = "text", icon = "ðŸ“") => {
    const label = prompt(`Enter field label:`) || "Field Label";
    const placeholder = prompt("Enter placeholder text:") || "Enter text...";
    
    const fieldHTML = `
      <div class="inline-flex items-center mx-1 my-1" contenteditable="false" style="display: inline-flex; border: 1px solid #d1d5db; padding: 6px 10px; border-radius: 4px; background: white; min-width: 200px; gap: 6px;">
        <div style="flex: 1;">
          <label style="font-size: 11px; color: #6b7280; font-weight: 500; display: block; margin-bottom: 2px;">${label}</label>
          <input type="${type}" placeholder="${placeholder}" style="border: none; outline: none; background: transparent; width: 100%; font-size: 14px; padding: 2px 0; color: #1f2937;" />
        </div>
      </div>
    `;
    document.execCommand('insertHTML', false, fieldHTML);
  };

  const insertCheckbox = () => {
    const label = prompt("Enter checkbox label:") || "Option";
    const checkboxHTML = `
      <div class="inline-flex mx-1 my-1" contenteditable="false" style="display: inline-flex; align-items: center; gap: 6px; padding: 6px 10px; border-radius: 4px; background: white; border: 1px solid #d1d5db;">
        <input type="checkbox" style="width: 16px; height: 16px; cursor: pointer;" />
        <span style="font-size: 14px; color: #374151;">${label}</span>
      </div>
    `;
    document.execCommand('insertHTML', false, checkboxHTML);
  };

  const insertCheckboxList = () => {
    const title = prompt("Enter list title:") || "Checklist";
    const itemsInput = prompt("Enter checkbox items (comma-separated):");
    if (!itemsInput) return;
    
    const items = itemsInput.split(",").map(item => item.trim());
    const listHTML = `
      <div contenteditable="false" style="border: 1px solid #e5e7eb; padding: 12px; border-radius: 6px; background: white; margin: 12px 0; display: inline-block; min-width: 250px;">
        <div style="font-weight: 600; font-size: 14px; color: #374151; margin-bottom: 10px; padding-bottom: 8px; border-bottom: 1px solid #e5e7eb;">
          ${title}
        </div>
        ${items.map(item => `
          <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 6px;">
            <input type="checkbox" style="width: 16px; height: 16px; cursor: pointer;" />
            <span style="font-size: 14px; color: #374151;">${item}</span>
          </div>
        `).join('')}
      </div>
    `;
    document.execCommand('insertHTML', false, listHTML);
  };

  const insertRadioList = () => {
    const groupName = `radio_${Date.now()}`;
    const title = prompt("Enter question/title:") || "Select One";
    const itemsInput = prompt("Enter radio button options (comma-separated):");
    if (!itemsInput) return;
    
    const items = itemsInput.split(",").map(item => item.trim());
    const radioHTML = `
      <div contenteditable="false" style="border: 1px solid #e5e7eb; padding: 12px; border-radius: 6px; background: white; margin: 12px 0; display: inline-block; min-width: 250px;">
        <div style="font-weight: 600; font-size: 14px; color: #374151; margin-bottom: 10px; padding-bottom: 8px; border-bottom: 1px solid #e5e7eb;">
          ${title}
        </div>
        ${items.map(item => `
          <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 6px;">
            <input type="radio" name="${groupName}" style="width: 16px; height: 16px; cursor: pointer;" />
            <span style="font-size: 14px; color: #374151;">${item}</span>
          </div>
        `).join('')}
      </div>
    `;
    document.execCommand('insertHTML', false, radioHTML);
  };

  const insertDropdown = () => {
    const label = prompt("Enter dropdown label:") || "Select Option";
    const optionsInput = prompt("Enter dropdown options (comma-separated):");
    if (!optionsInput) return;
    
    const options = optionsInput.split(",").map(item => item.trim());
    const dropdownHTML = `
      <div class="inline-flex items-center mx-1 my-1" contenteditable="false" style="display: inline-flex; border: 1px solid #d1d5db; padding: 6px 10px; border-radius: 4px; background: white; min-width: 220px; gap: 6px;">
        <div style="flex: 1;">
          <label style="font-size: 11px; color: #6b7280; font-weight: 500; display: block; margin-bottom: 2px;">${label}</label>
          <select style="border: none; outline: none; width: 100%; font-size: 14px; cursor: pointer; background: transparent; color: #1f2937;">
            <option value="">-- Select --</option>
            ${options.map(opt => `<option value="${opt}">${opt}</option>`).join('')}
          </select>
        </div>
      </div>
    `;
    document.execCommand('insertHTML', false, dropdownHTML);
  };

  const insertTable = () => {
    setShowTableModal(true);
  };

  const createTable = () => {
    let tableHTML = '<table style="border-collapse: collapse; width: 100%; margin: 20px 0; box-shadow: 0 4px 6px rgba(0,0,0,0.07); border-radius: 8px; overflow: hidden;" contenteditable="true"><tbody>';
    
    for (let i = 0; i < tableRows; i++) {
      tableHTML += '<tr>';
      for (let j = 0; j < tableCols; j++) {
        const bgColor = i === 0 ? '#f9fafb' : '#ffffff';
        const fontWeight = i === 0 ? 'bold' : 'normal';
        tableHTML += `<td style="border: 1px solid #e5e7eb; padding: 14px; min-width: 120px; vertical-align: top; background: ${bgColor}; font-weight: ${fontWeight};" contenteditable="true">${i === 0 ? 'Header' : 'Cell'}</td>`;
      }
      tableHTML += '</tr>';
    }
    
    tableHTML += '</tbody></table><p><br></p>';
    document.execCommand('insertHTML', false, tableHTML);
    setShowTableModal(false);
  };

  const insertCellCheckbox = () => {
    const itemsInput = prompt("Enter checkbox options (comma-separated):");
    if (!itemsInput) return;
    
    const items = itemsInput.split(",").map(item => item.trim());
    const checkboxHTML = `
      <div contenteditable="false" style="display: flex; flex-wrap: wrap; gap: 12px; align-items: center;">
        ${items.map(item => `
          <label style="display: inline-flex; align-items: center; gap: 6px; white-space: nowrap;">
            <input type="checkbox" style="width: 16px; height: 16px; cursor: pointer;" />
            <span style="font-size: 13px;">${item}</span>
          </label>
        `).join('')}
      </div>
    `;
    document.execCommand('insertHTML', false, checkboxHTML);
  };

  const insertCellDropdown = () => {
    const optionsInput = prompt("Enter dropdown options (comma-separated):");
    if (!optionsInput) return;
    
    const options = optionsInput.split(",").map(item => item.trim());
    const dropdownHTML = `
      <div contenteditable="false">
        <select style="border: 1px solid #d1d5db; padding: 6px 10px; border-radius: 4px; width: 100%; font-size: 13px; cursor: pointer; background: white;">
          <option value="">-- Select --</option>
          ${options.map(opt => `<option value="${opt}">${opt}</option>`).join('')}
        </select>
      </div>
    `;
    document.execCommand('insertHTML', false, dropdownHTML);
  };

  const insertSignature = () => {
    const label = prompt("Enter signature label:") || "Signature";
    const sigHTML = `
      <div contenteditable="false" style="border: 2px dashed #cbd5e1; padding: 16px; border-radius: 8px; margin: 12px 0; min-width: 300px; display: inline-block; background: #f8fafc;">
        <label style="font-size: 12px; color: #64748b; font-weight: 600; display: block; margin-bottom: 8px;">${label}</label>
        <div style="border-bottom: 2px solid #94a3b8; padding: 20px 0; min-width: 250px; text-align: center; color: #cbd5e1; font-style: italic;">
          Sign Here
        </div>
        <div style="display: flex; justify-content: space-between; margin-top: 8px; font-size: 11px; color: #94a3b8;">
          <span>Date: _____________</span>
        </div>
      </div>
    `;
    document.execCommand('insertHTML', false, sigHTML);
  };

  const loadTemplate = (templateName: string) => {
    const templates: { [key: string]: string } = {
      invoice: `
        <div style="padding: 20px;">
          <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px;">
            <h1 style="color: #1f2937; font-size: 36px; margin: 0;">INVOICE</h1>
            <div style="text-align: right;">
              <p style="margin: 4px 0; color: #6b7280;">Invoice #: <strong>INV-001</strong></p>
              <p style="margin: 4px 0; color: #6b7280;">Date: <strong>${new Date().toLocaleDateString()}</strong></p>
            </div>
          </div>
          
          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 30px;">
            <div style="background: #f9fafb; padding: 16px; border-radius: 8px;">
              <h3 style="color: #4b5563; margin-top: 0;">Bill To:</h3>
              <p style="margin: 4px 0;">Client Name: _______________</p>
              <p style="margin: 4px 0;">Address: _______________</p>
              <p style="margin: 4px 0;">Email: _______________</p>
            </div>
            <div style="background: #f9fafb; padding: 16px; border-radius: 8px;">
              <h3 style="color: #4b5563; margin-top: 0;">From:</h3>
              <p style="margin: 4px 0;">Your Company</p>
              <p style="margin: 4px 0;">Your Address</p>
              <p style="margin: 4px 0;">Your Email</p>
            </div>
          </div>

          <table style="width: 100%; border-collapse: collapse; margin-bottom: 20px;">
            <thead>
              <tr style="background: #1f2937; color: white;">
                <th style="padding: 12px; text-align: left; border: 1px solid #374151;">Description</th>
                <th style="padding: 12px; text-align: center; border: 1px solid #374151;">Qty</th>
                <th style="padding: 12px; text-align: right; border: 1px solid #374151;">Price</th>
                <th style="padding: 12px; text-align: right; border: 1px solid #374151;">Total</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td style="padding: 12px; border: 1px solid #e5e7eb;">Service/Product 1</td>
                <td style="padding: 12px; text-align: center; border: 1px solid #e5e7eb;">1</td>
                <td style="padding: 12px; text-align: right; border: 1px solid #e5e7eb;">$100.00</td>
                <td style="padding: 12px; text-align: right; border: 1px solid #e5e7eb;">$100.00</td>
              </tr>
            </tbody>
          </table>

          <div style="text-align: right; margin-top: 20px;">
            <p style="font-size: 18px; margin: 8px 0;"><strong>Subtotal:</strong> $100.00</p>
            <p style="font-size: 18px; margin: 8px 0;"><strong>Tax (10%):</strong> $10.00</p>
            <p style="font-size: 24px; margin: 8px 0; color: #1f2937;"><strong>Total:</strong> $110.00</p>
          </div>
        </div>
      `,
      form: `
        <div style="max-width: 800px; margin: 0 auto; padding: 30px;">
          <div style="text-align: center; margin-bottom: 30px; padding-bottom: 20px; border-bottom: 3px solid #3b82f6;">
            <h1 style="color: #1f2937; font-size: 32px; margin: 0 0 10px 0;">Application Form</h1>
            <p style="color: #6b7280; margin: 0;">Please fill out all required fields</p>
          </div>

          <div style="background: #f9fafb; padding: 20px; border-radius: 8px; margin-bottom: 20px;">
            <h2 style="color: #374151; font-size: 20px; margin-top: 0;">Personal Information</h2>
            <p>Full Name: <input type="text" style="width: 60%; padding: 8px; border: 1px solid #d1d5db; border-radius: 4px;" placeholder="Enter full name" /></p>
            <p>Email: <input type="email" style="width: 60%; padding: 8px; border: 1px solid #d1d5db; border-radius: 4px;" placeholder="Enter email" /></p>
            <p>Phone: <input type="tel" style="width: 60%; padding: 8px; border: 1px solid #d1d5db; border-radius: 4px;" placeholder="Enter phone" /></p>
          </div>

          <div style="background: #f0fdf4; padding: 20px; border-radius: 8px; margin-bottom: 20px;">
            <h2 style="color: #065f46; font-size: 20px; margin-top: 0;">Terms & Conditions</h2>
            <label style="display: flex; align-items: center; gap: 8px; margin: 12px 0;">
              <input type="checkbox" style="width: 18px; height: 18px;" />
              <span>I agree to the terms and conditions</span>
            </label>
            <label style="display: flex; align-items: center; gap: 8px; margin: 12px 0;">
              <input type="checkbox" style="width: 18px; height: 18px;" />
              <span>I want to receive email updates</span>
            </label>
          </div>
        </div>
      `,
      contract: `
        <div style="max-width: 800px; margin: 0 auto; padding: 40px; font-family: 'Times New Roman', serif;">
          <div style="text-align: center; margin-bottom: 40px;">
            <h1 style="font-size: 28px; margin: 0; text-transform: uppercase; letter-spacing: 2px;">Service Agreement</h1>
            <p style="color: #6b7280; margin-top: 10px;">Effective Date: ${new Date().toLocaleDateString()}</p>
          </div>

          <div style="margin-bottom: 30px;">
            <p style="line-height: 1.8;">This Service Agreement ("Agreement") is entered into on <strong>_______________</strong> between:</p>
            
            <div style="background: #f9fafb; padding: 20px; border-left: 4px solid #3b82f6; margin: 20px 0;">
              <p style="margin: 8px 0;"><strong>Service Provider:</strong> _______________</p>
              <p style="margin: 8px 0;"><strong>Address:</strong> _______________</p>
              <p style="margin: 8px 0;"><strong>Email:</strong> _______________</p>
            </div>

            <p style="margin: 20px 0;">AND</p>

            <div style="background: #f9fafb; padding: 20px; border-left: 4px solid #10b981; margin: 20px 0;">
              <p style="margin: 8px 0;"><strong>Client:</strong> _______________</p>
              <p style="margin: 8px 0;"><strong>Address:</strong> _______________</p>
              <p style="margin: 8px 0;"><strong>Email:</strong> _______________</p>
            </div>
          </div>

          <h2 style="color: #1f2937; font-size: 20px; margin-top: 30px;">Terms and Conditions</h2>
          <p style="line-height: 1.8;">1. The Service Provider agrees to provide the following services:</p>
          <p style="line-height: 1.8; padding-left: 20px;">_______________</p>
          
          <div style="margin-top: 60px; display: flex; justify-content: space-between;">
            <div style="text-align: center;">
              <div style="border-top: 2px solid #000; width: 200px; margin-bottom: 8px;"></div>
              <p style="margin: 0; font-size: 14px;">Service Provider Signature</p>
            </div>
            <div style="text-align: center;">
              <div style="border-top: 2px solid #000; width: 200px; margin-bottom: 8px;"></div>
              <p style="margin: 0; font-size: 14px;">Client Signature</p>
            </div>
          </div>
        </div>
      `
    };

    if (editorRef.current && templates[templateName]) {
      editorRef.current.innerHTML = templates[templateName];
      setShowTemplates(false);
    }
  };

  const generatePDF = async () => {
    // Import jsPDF library
    const script = document.createElement('script');
    script.src = 'https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js';
    document.head.appendChild(script);

    script.onload = async () => {
      const { jsPDF } = (window as any).jspdf;
      const doc = new jsPDF({
        orientation: 'portrait',
        unit: 'mm',
        format: pageFormat === 'A4' ? 'a4' : pageFormat === 'Letter' ? 'letter' : 'a4'
      });

      // Get content
      const content = editorRef.current?.innerHTML || "";
      
      // Create a temporary container
      const tempDiv = document.createElement('div');
      tempDiv.innerHTML = content;
      tempDiv.style.position = 'absolute';
      tempDiv.style.left = '-9999px';
      tempDiv.style.width = '210mm';
      tempDiv.style.padding = '20px';
      tempDiv.style.fontFamily = fontFamily;
      tempDiv.style.fontSize = '14px';
      tempDiv.style.lineHeight = '1.6';
      tempDiv.style.color = '#000';
      document.body.appendChild(tempDiv);

      // Process all form fields and make them AcroForm fields
      const textInputs = tempDiv.querySelectorAll('input[type="text"], input[type="email"], input[type="tel"], input[type="date"], input[type="number"]');
      const checkboxes = tempDiv.querySelectorAll('input[type="checkbox"]');
      const radios = tempDiv.querySelectorAll('input[type="radio"]');
      const selects = tempDiv.querySelectorAll('select');

      let yPosition = 20;
      const pageHeight = doc.internal.pageSize.getHeight();
      const pageWidth = doc.internal.pageSize.getWidth();

      // Parse HTML content and add to PDF
      const parseNode = (node: any, x: number, y: number) => {
        if (y > pageHeight - 20) {
          doc.addPage();
          y = 20;
        }

        if (node.nodeType === Node.TEXT_NODE) {
          const text = node.textContent?.trim();
          if (text) {
            doc.text(text, x, y);
            y += 7;
          }
        } else if (node.nodeType === Node.ELEMENT_NODE) {
          const tagName = node.tagName.toLowerCase();
          
          if (tagName === 'h1') {
            doc.setFontSize(24);
            doc.setFont(undefined, 'bold');
            doc.text(node.textContent || '', x, y);
            doc.setFontSize(14);
            doc.setFont(undefined, 'normal');
            y += 12;
          } else if (tagName === 'h2') {
            doc.setFontSize(18);
            doc.setFont(undefined, 'bold');
            doc.text(node.textContent || '', x, y);
            doc.setFontSize(14);
            doc.setFont(undefined, 'normal');
            y += 10;
          } else if (tagName === 'p') {
            const text = node.textContent?.trim();
            if (text) {
              const lines = doc.splitTextToSize(text, pageWidth - 40);
              doc.text(lines, x, y);
              y += lines.length * 7;
            }
          } else if (tagName === 'input') {
            const type = node.getAttribute('type');
            const fieldName = `field_${Math.random().toString(36).substr(2, 9)}`;
            
            if (type === 'text' || type === 'email' || type === 'tel' || type === 'date' || type === 'number') {
              const label = node.closest('div')?.querySelector('label')?.textContent || '';
              if (label) {
                doc.setFontSize(10);
                doc.text(label, x, y);
                y += 5;
                doc.setFontSize(14);
              }
              
              // Add text field
              const textField = new doc.AcroFormTextField();
              textField.fieldName = fieldName;
              textField.Rect = [x, y - 5, 80, 8];
              textField.multiline = false;
              doc.addField(textField);
              
              doc.rect(x, y - 5, 80, 8);
              y += 12;
            } else if (type === 'checkbox') {
              const label = node.nextSibling?.textContent || '';
              
              // Add checkbox field
              const checkbox = new doc.AcroFormCheckBox();
              checkbox.fieldName = fieldName;
              checkbox.Rect = [x, y - 4, 5, 5];
              checkbox.appearanceState = 'Off';
              doc.addField(checkbox);
              
              doc.rect(x, y - 4, 5, 5);
              if (label) {
                doc.text(label.trim(), x + 7, y);
              }
              y += 8;
            } else if (type === 'radio') {
              const label = node.nextSibling?.textContent || '';
              const groupName = node.getAttribute('name') || fieldName;
              
              // Add radio button
              const radio = new doc.AcroFormRadioButton();
              radio.fieldName = groupName;
              radio.Rect = [x, y - 4, 5, 5];
              doc.addField(radio);
              
              doc.circle(x + 2.5, y - 1.5, 2.5);
              if (label) {
                doc.text(label.trim(), x + 7, y);
              }
              y += 8;
            }
          } else if (tagName === 'select') {
            const label = node.closest('div')?.querySelector('label')?.textContent || '';
            if (label) {
              doc.setFontSize(10);
              doc.text(label, x, y);
              y += 5;
              doc.setFontSize(14);
            }
            
            const options: string[] = [];
            node.querySelectorAll('option').forEach((opt: any) => {
              if (opt.value) options.push(opt.textContent);
            });
            
            // Add combo box
            const comboBox = new doc.AcroFormComboBox();
            comboBox.fieldName = `select_${Math.random().toString(36).substr(2, 9)}`;
            comboBox.Rect = [x, y - 5, 60, 8];
            comboBox.edit = false;
            comboBox.setOptions(options);
            doc.addField(comboBox);
            
            doc.rect(x, y - 5, 60, 8);
            y += 12;
          } else if (tagName === 'table') {
            // Handle tables
            const rows = node.querySelectorAll('tr');
            rows.forEach((row: any) => {
              const cells = row.querySelectorAll('td, th');
              let xPos = x;
              cells.forEach((cell: any, idx: number) => {
                const cellText = cell.textContent?.trim() || '';
                const cellWidth = (pageWidth - 40) / cells.length;
                doc.rect(xPos, y - 5, cellWidth, 10);
                
                const lines = doc.splitTextToSize(cellText, cellWidth - 4);
                doc.text(lines, xPos + 2, y);
                xPos += cellWidth;
              });
              y += 12;
            });
          } else {
            // Process child nodes
            node.childNodes.forEach((child: any) => {
              y = parseNode(child, x, y);
            });
          }
        }
        
        return y;
      };

      // Parse and add content
      tempDiv.childNodes.forEach((child: any) => {
        yPosition = parseNode(child, 20, yPosition);
      });

      // Clean up
      document.body.removeChild(tempDiv);

      // Save PDF
      doc.save(`${documentTitle.replace(/\s+/g, '_')}.pdf`);
    };

    script.onerror = () => {
      alert('Failed to load PDF library. Please check your internet connection.');
    };
  };

  const saveAsHTML = () => {
    const content = editorRef.current?.innerHTML || "";
    const fullHTML = `
      <!DOCTYPE html>
      <html lang="en">
        <head>
          <meta charset="UTF-8">
          <meta name="viewport" content="width=device-width, initial-scale=1.0">
          <title>${documentTitle}</title>
          <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
          <style>
            * {
              box-sizing: border-box;
            }
            body {
              font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
              padding: 40px;
              max-width: 1000px;
              margin: 0 auto;
              background: #f9fafb;
              color: #1f2937;
              line-height: 1.6;
            }
            .document-container {
              background: white;
              padding: 60px;
              border-radius: 8px;
              box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            }
            table {
              border-collapse: collapse;
              width: 100%;
              margin: 20px 0;
            }
            td, th {
              border: 1px solid #e5e7eb;
              padding: 12px;
            }
            input, select, textarea {
              font-family: inherit;
            }
          </style>
        </head>
        <body>
          <div class="document-container">
            ${content}
          </div>
        </body>
      </html>
    `;
    const blob = new Blob([fullHTML], { type: "text/html" });
    const url = URL.createObjectURL(blob);
    const a = document.createElement("a");
    a.href = url;
    a.download = `${documentTitle.replace(/\s+/g, '_')}.html`;
    a.click();
    URL.revokeObjectURL(url);
  };

  type ToolbarButtonProps = {
    onClick: () => void;
    icon: React.ComponentType<{ size?: number }>;
    title: string;
    active?: boolean;
    variant?: "default" | "primary" | "success" | "warning";
  };

  const ToolbarButton: React.FC<ToolbarButtonProps> = ({ onClick, icon: Icon, title, active = false, variant = "default" }) => {
    const variants = {
      default: "hover:bg-gray-100 text-gray-700",
      primary: "hover:bg-blue-50 text-blue-600",
      success: "hover:bg-green-50 text-green-600",
      warning: "hover:bg-orange-50 text-orange-600"
    };

    return (
      <button
        onClick={onClick}
        title={title}
        className={`p-2.5 rounded-lg transition-all duration-200 ${variants[variant]} ${
          active ? "bg-blue-100 text-blue-600" : ""
        }`}
      >
        <Icon size={18} />
      </button>
    );
  };

  return (
    <div className="min-h-screen bg-gray-50 p-6">
      <div className="max-w-7xl mx-auto">
        {/* Header */}
        <div className="mb-6 flex items-center justify-between">
          <div>
            <h1 className="text-4xl font-bold text-gray-900">
              Template Editor
            </h1>
            <p className="text-gray-600 mt-1">Create professional documents with editable PDF forms</p>
          </div>
          <div className="flex gap-3">
            <button
              onClick={() => setShowTemplates(true)}
              className="flex items-center gap-2 px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-all duration-200 shadow-sm font-medium"
            >
              <Sparkles size={18} />
              Templates
            </button>
            <button
              onClick={generatePDF}
              className="flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-all duration-200 shadow-sm font-medium"
            >
              <FileText size={18} />
              Export PDF
            </button>
          </div>
        </div>

        {/* Document Settings Bar */}
        <div className="bg-white rounded-lg shadow-sm border border-gray-200 p-4 mb-4 flex items-center gap-4">
          <div className="flex items-center gap-2">
            <Settings size={18} className="text-gray-500" />
            <input
              type="text"
              value={documentTitle}
              onChange={(e) => setDocumentTitle(e.target.value)}
              className="px-3 py-1.5 border border-gray-300 rounded-lg text-sm font-medium focus:outline-none focus:ring-2 focus:ring-blue-500"
              placeholder="Document Title"
            />
          </div>
          <div className="h-6 w-px bg-gray-300" />
          <select
            value={pageFormat}
            onChange={(e) => setPageFormat(e.target.value)}
            className="px-3 py-1.5 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"
          >
            <option value="A4">A4</option>
            <option value="Letter">Letter</option>
            <option value="Legal">Legal</option>
          </select>
        </div>

        {/* Editor Container */}
        <div className="bg-white rounded-lg shadow-lg overflow-hidden border border-gray-200">
          {/* Main Toolbar */}
          <div className="border-b border-gray-200 p-3 bg-white">
            <div className="flex flex-wrap gap-2 items-center">
              {/* Font Controls */}
              <div className="flex items-center gap-2 border-r border-gray-300 pr-3">
                <select
                  value={fontFamily}
                  onChange={(e) => changeFontFamily(e.target.value)}
                  className="px-3 py-1.5 border border-gray-300 rounded-lg text-sm bg-white focus:outline-none focus:ring-2 focus:ring-blue-500"
                >
                  <option value="Inter">Inter</option>
                  <option value="Arial">Arial</option>
                  <option value="Times New Roman">Times New Roman</option>
                  <option value="Georgia">Georgia</option>
                  <option value="Courier New">Courier New</option>
                  <option value="Verdana">Verdana</option>
                </select>
                
                <select
                  value={fontSize}
                  onChange={(e) => changeFontSize(e.target.value)}
                  className="px-2 py-1.5 border border-gray-300 rounded-lg text-sm w-20 bg-white focus:outline-none focus:ring-2 focus:ring-blue-500"
                >
                  <option value="12">12</option>
                  <option value="14">14</option>
                  <option value="16">16</option>
                  <option value="18">18</option>
                  <option value="20">20</option>
                  <option value="24">24</option>
                  <option value="28">28</option>
                  <option value="32">32</option>
                  <option value="36">36</option>
                  <option value="48">48</option>
                </select>
              </div>

              {/* Text Formatting */}
              <div className="flex gap-1 border-r border-gray-300 pr-3">
                <ToolbarButton
                  onClick={() => executeCommand("bold")}
                  icon={Bold}
                  title="Bold (Ctrl+B)"
                />
                <ToolbarButton
                  onClick={() => executeCommand("italic")}
                  icon={Italic}
                  title="Italic (Ctrl+I)"
                />
                <ToolbarButton
                  onClick={() => executeCommand("underline")}
                  icon={Underline}
                  title="Underline (Ctrl+U)"
                />
              </div>

              {/* Headings */}
              <div className="flex gap-1 border-r border-gray-300 pr-3">
                <ToolbarButton
                  onClick={() => insertHeading(1)}
                  icon={Heading1}
                  title="Heading 1"
                />
                <ToolbarButton
                  onClick={() => insertHeading(2)}
                  icon={Heading2}
                  title="Heading 2"
                />
                <ToolbarButton
                  onClick={() => insertHeading(3)}
                  icon={Heading3}
                  title="Heading 3"
                />
              </div>

              {/* Colors */}
              <div className="flex gap-1 border-r border-gray-300 pr-3 relative">
                <div className="relative">
                  <button
                    onClick={() => {
                      setShowColorPicker(!showColorPicker);
                      setShowBgPicker(false);
                    }}
                    className="p-2.5 rounded-lg hover:bg-gray-100 transition-all duration-200"
                    title="Text Color"
                  >
                    <Type size={18} />
                    <div
                      className="absolute bottom-1 left-1 right-1 h-1 rounded"
                      style={{ backgroundColor: textColor }}
                    />
                  </button>
                  {showColorPicker && (
                    <div className="absolute top-full left-0 mt-2 p-3 bg-white border border-gray-200 rounded-lg shadow-xl z-10">
                      <input
                        type="color"
                        value={textColor}
                        onChange={(e) => changeTextColor(e.target.value)}
                        className="w-32 h-10 cursor-pointer rounded"
                      />
                    </div>
                  )}
                </div>
                
                <div className="relative">
                  <button
                    onClick={() => {
                      setShowBgPicker(!showBgPicker);
                      setShowColorPicker(false);
                    }}
                    className="p-2.5 rounded-lg hover:bg-gray-100 transition-all duration-200"
                    title="Highlight Color"
                  >
                    <Highlighter size={18} />
                    <div
                      className="absolute bottom-1 left-1 right-1 h-1 rounded"
                      style={{ backgroundColor: bgColor }}
                    />
                  </button>
                  {showBgPicker && (
                    <div className="absolute top-full left-0 mt-2 p-3 bg-white border border-gray-200 rounded-lg shadow-xl z-10">
                      <input
                        type="color"
                        value={bgColor}
                        onChange={(e) => changeBackgroundColor(e.target.value)}
                        className="w-32 h-10 cursor-pointer rounded"
                      />
                    </div>
                  )}
                </div>
              </div>

              {/* Alignment */}
              <div className="flex gap-1 border-r border-gray-300 pr-3">
                <ToolbarButton
                  onClick={() => executeCommand("justifyLeft")}
                  icon={AlignLeft}
                  title="Align Left"
                />
                <ToolbarButton
                  onClick={() => executeCommand("justifyCenter")}
                  icon={AlignCenter}
                  title="Align Center"
                />
                <ToolbarButton
                  onClick={() => executeCommand("justifyRight")}
                  icon={AlignRight}
                  title="Align Right"
                />
                <ToolbarButton
                  onClick={() => executeCommand("justifyFull")}
                  icon={AlignJustify}
                  title="Justify"
                />
              </div>

              {/* Lists */}
              <div className="flex gap-1 border-r border-gray-300 pr-3">
                <ToolbarButton
                  onClick={() => executeCommand("insertUnorderedList")}
                  icon={List}
                  title="Bullet List"
                />
                <ToolbarButton
                  onClick={() => executeCommand("insertOrderedList")}
                  icon={ListOrdered}
                  title="Numbered List"
                />
              </div>

              {/* Insert */}
              <div className="flex gap-1 border-r border-gray-300 pr-3">
                <ToolbarButton
                  onClick={insertLink}
                  icon={Link}
                  title="Insert Link"
                />
                <ToolbarButton
                  onClick={insertImage}
                  icon={Image}
                  title="Insert Image"
                />
                <ToolbarButton
                  onClick={insertDivider}
                  icon={Minus}
                  title="Insert Divider"
                />
              </div>

              {/* Undo/Redo */}
              <div className="flex gap-1">
                <ToolbarButton
                  onClick={() => executeCommand("undo")}
                  icon={Undo}
                  title="Undo"
                />
                <ToolbarButton
                  onClick={() => executeCommand("redo")}
                  icon={Redo}
                  title="Redo"
                />
              </div>
            </div>

            {/* Form Fields Toolbar */}
            <div className="flex flex-wrap gap-2 items-center mt-3 pt-3 border-t border-gray-200">
              <span className="text-xs font-bold text-gray-500 mr-1 flex items-center gap-1">
                <Sparkles size={14} />
                FORM FIELDS:
              </span>
              
              <button
                onClick={() => insertTextField("text", "âœï¸")}
                className="flex items-center gap-1.5 px-3 py-2 bg-gradient-to-r from-blue-50 to-blue-100 text-blue-700 rounded-lg hover:from-blue-100 hover:to-blue-200 transition-all duration-200 text-sm font-medium shadow-sm border border-blue-200"
                title="Insert Text Field"
              >
                <SquarePen size={16} />
                Text
              </button>

              <button
                onClick={() => insertTextField("email", "ðŸ“§")}
                className="flex items-center gap-1.5 px-3 py-2 bg-gradient-to-r from-purple-50 to-purple-100 text-purple-700 rounded-lg hover:from-purple-100 hover:to-purple-200 transition-all duration-200 text-sm font-medium shadow-sm border border-purple-200"
                title="Insert Email Field"
              >
                <Mail size={16} />
                Email
              </button>

              <button
                onClick={() => insertTextField("tel", "ðŸ“ž")}
                className="flex items-center gap-1.5 px-3 py-2 bg-gradient-to-r from-pink-50 to-pink-100 text-pink-700 rounded-lg hover:from-pink-100 hover:to-pink-200 transition-all duration-200 text-sm font-medium shadow-sm border border-pink-200"
                title="Insert Phone Field"
              >
                <Phone size={16} />
                Phone
              </button>

              <button
                onClick={() => insertTextField("date", "ðŸ“…")}
                className="flex items-center gap-1.5 px-3 py-2 bg-gradient-to-r from-teal-50 to-teal-100 text-teal-700 rounded-lg hover:from-teal-100 hover:to-teal-200 transition-all duration-200 text-sm font-medium shadow-sm border border-teal-200"
                title="Insert Date Field"
              >
                <Calendar size={16} />
                Date
              </button>

              <button
                onClick={() => insertTextField("number", "ðŸ”¢")}
                className="flex items-center gap-1.5 px-3 py-2 bg-gradient-to-r from-amber-50 to-amber-100 text-amber-700 rounded-lg hover:from-amber-100 hover:to-amber-200 transition-all duration-200 text-sm font-medium shadow-sm border border-amber-200"
                title="Insert Number Field"
              >
                <Hash size={16} />
                Number
              </button>

              <div className="h-6 w-px bg-gray-300 mx-1" />

              <button
                onClick={insertCheckbox}
                className="flex items-center gap-1.5 px-3 py-2 bg-gradient-to-r from-green-50 to-green-100 text-green-700 rounded-lg hover:from-green-100 hover:to-green-200 transition-all duration-200 text-sm font-medium shadow-sm border border-green-200"
                title="Insert Single Checkbox"
              >
                <Square size={16} />
                Checkbox
              </button>

              <button
                onClick={insertCheckboxList}
                className="flex items-center gap-1.5 px-3 py-2 bg-gradient-to-r from-emerald-50 to-emerald-100 text-emerald-700 rounded-lg hover:from-emerald-100 hover:to-emerald-200 transition-all duration-200 text-sm font-medium shadow-sm border border-emerald-200"
                title="Insert Checkbox List"
              >
                <CheckSquare size={16} />
                Checklist
              </button>

              <button
                onClick={insertRadioList}
                className="flex items-center gap-1.5 px-3 py-2 bg-gradient-to-r from-violet-50 to-violet-100 text-violet-700 rounded-lg hover:from-violet-100 hover:to-violet-200 transition-all duration-200 text-sm font-medium shadow-sm border border-violet-200"
                title="Insert Radio Button List"
              >
                <Circle size={16} />
                Radio
              </button>

              <button
                onClick={insertDropdown}
                className="flex items-center gap-1.5 px-3 py-2 bg-gradient-to-r from-orange-50 to-orange-100 text-orange-700 rounded-lg hover:from-orange-100 hover:to-orange-200 transition-all duration-200 text-sm font-medium shadow-sm border border-orange-200"
                title="Insert Dropdown"
              >
                <ChevronDown size={16} />
                Dropdown
              </button>

              <div className="h-6 w-px bg-gray-300 mx-1" />

              <button
                onClick={insertTable}
                className="flex items-center gap-1.5 px-3 py-2 bg-gradient-to-r from-indigo-50 to-indigo-100 text-indigo-700 rounded-lg hover:from-indigo-100 hover:to-indigo-200 transition-all duration-200 text-sm font-medium shadow-sm border border-indigo-200"
                title="Insert Table"
              >
                <Table size={16} />
                Table
              </button>

              <button
                onClick={insertSignature}
                className="flex items-center gap-1.5 px-3 py-2 bg-gradient-to-r from-slate-50 to-slate-100 text-slate-700 rounded-lg hover:from-slate-100 hover:to-slate-200 transition-all duration-200 text-sm font-medium shadow-sm border border-slate-200"
                title="Insert Signature Box"
              >
                <SquarePen size={16} />
                Signature
              </button>

              <div className="border-l-2 border-gray-300 pl-3 ml-2 flex gap-2">
                <span className="text-xs font-bold text-gray-500 flex items-center">IN CELL:</span>
                <button
                  onClick={insertCellCheckbox}
                  className="px-2.5 py-1.5 bg-teal-50 text-teal-700 rounded-lg hover:bg-teal-100 transition-all text-xs font-medium border border-teal-200"
                  title="Add Checkbox in Cell"
                >
                  â˜‘ Check
                </button>
                <button
                  onClick={insertCellDropdown}
                  className="px-2.5 py-1.5 bg-teal-50 text-teal-700 rounded-lg hover:bg-teal-100 transition-all text-xs font-medium border border-teal-200"
                  title="Add Dropdown in Cell"
                >
                  â–¼ Select
                </button>
              </div>

              {/* Save Options */}
              <div className="ml-auto flex gap-2">
                <button
                  onClick={saveAsHTML}
                  className="flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-lg hover:from-green-700 hover:to-emerald-700 transition-all duration-200 text-sm font-medium shadow-md"
                >
                  <Download size={16} />
                  Save HTML
                </button>
              </div>
            </div>
          </div>

          {/* Editor Area */}
          <div className="p-12 bg-gradient-to-br from-gray-50 to-white min-h-[700px]">
            <div
              ref={editorRef}
              contentEditable
              className="outline-none min-h-[650px] max-w-none bg-white p-16 rounded-lg shadow-lg focus:ring-4 focus:ring-blue-500 focus:ring-opacity-20 transition-all duration-200"
              style={{
                fontFamily: fontFamily,
                fontSize: `${fontSize}px`,
                lineHeight: "1.8"
              }}
              suppressContentEditableWarning
            >
              <div style={{ textAlign: "center", marginBottom: "40px" }}>
                <h1 style={{ fontSize: "42px", fontWeight: "bold", color: "#1f2937", marginBottom: "10px" }}>
                  âœ¨ Modern Template Editor
                </h1>
                <p style={{ fontSize: "18px", color: "#6b7280" }}>Create stunning, professional documents with interactive form fields</p>
              </div>

              <div style={{ background: "linear-gradient(135deg, #dbeafe 0%, #e0e7ff 100%)", padding: "24px", borderRadius: "12px", marginBottom: "24px", border: "2px solid #93c5fd" }}>
                <h2 style={{ fontSize: "24px", color: "#1e40af", marginTop: "0" }}>ðŸš€ Getting Started</h2>
                <p>This powerful editor includes everything you need:</p>
                <ul style={{ color: "#374151", lineHeight: "1.8" }}>
                  <li><strong>Rich Text Formatting</strong> - Bold, italic, headings, colors, and more</li>
                  <li><strong>Smart Form Fields</strong> - Text, email, phone, date, number inputs</li>
                  <li><strong>Interactive Elements</strong> - Checkboxes, radio buttons, dropdowns</li>
                  <li><strong>Professional Tables</strong> - With form fields inside cells</li>
                  <li><strong>Editable PDF Export</strong> - All form fields remain functional in PDF</li>
                  <li><strong>Pre-built Templates</strong> - Invoice, form, contract templates ready to use</li>
                </ul>
              </div>

              <div style={{ background: "linear-gradient(135deg, #fef3c7 0%, #fde68a 100%)", padding: "20px", borderRadius: "12px", border: "2px solid #fbbf24" }}>
                <p style={{ margin: "0", fontSize: "16px", color: "#92400e" }}>
                  ðŸ’¡ <strong>Pro Tip:</strong> Click "Templates" button to load pre-designed templates, or start from scratch. All form fields will work perfectly in your exported PDFs!
                </p>
              </div>
            </div>
          </div>
        </div>

        {/* Feature Highlights */}
        <div className="mt-6 grid grid-cols-1 md:grid-cols-3 gap-4">
          <div className="bg-white rounded-lg p-6 shadow-sm border border-gray-200">
            <div className="w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center mb-4">
              <FileText className="text-blue-600" size={24} />
            </div>
            <h3 className="font-bold text-gray-900 mb-2">Editable PDF Forms</h3>
            <p className="text-sm text-gray-600">Export to PDF with all form fields remaining fully editable and functional</p>
          </div>
          <div className="bg-white rounded-lg p-6 shadow-sm border border-gray-200">
            <div className="w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center mb-4">
              <Sparkles className="text-green-600" size={24} />
            </div>
            <h3 className="font-bold text-gray-900 mb-2">Pre-built Templates</h3>
            <p className="text-sm text-gray-600">Start quickly with professional invoice, form, and contract templates</p>
          </div>
          <div className="bg-white rounded-lg p-6 shadow-sm border border-gray-200">
            <div className="w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center mb-4">
              <Table className="text-purple-600" size={24} />
            </div>
            <h3 className="font-bold text-gray-900 mb-2">Advanced Tables</h3>
            <p className="text-sm text-gray-600">Create complex tables with form fields and interactive elements inside cells</p>
          </div>
        </div>
      </div>

      {/* Templates Modal */}
      {showTemplates && (
        <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-6">
          <div className="bg-white rounded-2xl p-8 max-w-4xl w-full shadow-2xl max-h-[90vh] overflow-y-auto">
            <div className="flex justify-between items-center mb-6">
              <h2 className="text-3xl font-bold text-gray-900">Choose a Template</h2>
              <button
                onClick={() => setShowTemplates(false)}
                className="text-gray-400 hover:text-gray-600 text-2xl font-bold w-10 h-10 flex items-center justify-center rounded-lg hover:bg-gray-100"
              >
                Ã—
              </button>
            </div>
            
            <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
              <button
                onClick={() => loadTemplate("invoice")}
                className="group text-left border-2 border-gray-200 rounded-xl p-6 hover:border-blue-500 hover:shadow-lg transition-all duration-200"
              >
                <div className="w-16 h-16 bg-gradient-to-br from-blue-100 to-blue-200 rounded-lg flex items-center justify-center mb-4 group-hover:scale-110 transition-transform">
                  <DollarSign size={32} className="text-blue-600" />
                </div>
                <h3 className="text-xl font-bold text-gray-900 mb-2">Invoice Template</h3>
                <p className="text-sm text-gray-600">Professional invoice with itemized billing, totals, and client information</p>
              </button>

              <button
                onClick={() => loadTemplate("form")}
                className="group text-left border-2 border-gray-200 rounded-xl p-6 hover:border-green-500 hover:shadow-lg transition-all duration-200"
              >
                <div className="w-16 h-16 bg-gradient-to-br from-green-100 to-green-200 rounded-lg flex items-center justify-center mb-4 group-hover:scale-110 transition-transform">
                  <CheckSquare size={32} className="text-green-600" />
                </div>
                <h3 className="text-xl font-bold text-gray-900 mb-2">Application Form</h3>
                <p className="text-sm text-gray-600">Comprehensive form with personal information, checkboxes, and terms</p>
              </button>

              <button
                onClick={() => loadTemplate("contract")}
                className="group text-left border-2 border-gray-200 rounded-xl p-6 hover:border-purple-500 hover:shadow-lg transition-all duration-200"
              >
                <div className="w-16 h-16 bg-gradient-to-br from-purple-100 to-purple-200 rounded-lg flex items-center justify-center mb-4 group-hover:scale-110 transition-transform">
                  <FileText size={32} className="text-purple-600" />
                </div>
                <h3 className="text-xl font-bold text-gray-900 mb-2">Service Contract</h3>
                <p className="text-sm text-gray-600">Legal agreement template with signature fields and terms</p>
              </button>
            </div>
          </div>
        </div>
      )}

      {/* Table Modal */}
      {showTableModal && (
        <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
          <div className="bg-white rounded-2xl p-8 w-96 shadow-2xl">
            <h3 className="text-2xl font-bold mb-6 text-gray-900">Insert Table</h3>
            <div className="space-y-5">
              <div>
                <label className="block text-sm font-semibold mb-2 text-gray-700">Rows:</label>
                <input
                  type="number"
                  min="1"
                  max="20"
                  value={tableRows}
                  onChange={(e) => setTableRows(parseInt(e.target.value) || 1)}
                  className="w-full border-2 border-gray-300 rounded-lg px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                />
              </div>
              <div>
                <label className="block text-sm font-semibold mb-2 text-gray-700">Columns:</label>
                <input
                  type="number"
                  min="1"
                  max="10"
                  value={tableCols}
                  onChange={(e) => setTableCols(parseInt(e.target.value) || 1)}
                  className="w-full border-2 border-gray-300 rounded-lg px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                />
              </div>
              <div className="flex gap-3 justify-end mt-8">
                <button
                  onClick={() => setShowTableModal(false)}
                  className="px-5 py-2.5 border-2 border-gray-300 rounded-lg hover:bg-gray-50 font-medium transition-colors"
                >
                  Cancel
                </button>
                <button
                  onClick={createTable}
                  className="px-5 py-2.5 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg hover:from-blue-700 hover:to-indigo-700 font-medium shadow-md transition-all"
                >
                  Insert Table
                </button>
              </div>
            </div>
          </div>
        </div>
      )}
    </div>
  );
};

export default AddTemplate;